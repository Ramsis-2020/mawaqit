{% extends 'default/layout.html.twig' %}

{% block additional_stylesheets %}
    {% stylesheets
        "bundles/app/flexSlider/flexslider.css"
        "bundles/app/css/index.css"
        filter="cssrewrite" %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css">
    {% endstylesheets %}

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css"/>
{% endblock %}

 {% block textHeader %}
     <div class="intro-lead-in">{{ 'home.title.header1'|trans }}</div>
     <div class="intro-heading">{{ 'site_title'|trans }}</div>
     <div class="intro-subheading">{{ 'home.title.header2'|trans }}</div>
     <div class="intro-subheading">{{ 'home.title.header3'|trans }}</div>
     <div class="text-muted">
         <small>{{ 'home.title.header4'|trans }}</small>
     </div>
     <a href="#projet" class="page-scroll btn btn-xl">{{ 'home.button.discover'|trans }}</a>
 {% endblock %}

{% block content %}
    <div class="text-center">
        <!-- projet Section -->
        <section id="projet">
            <div class="container">
                <h2 class="section-heading">{{ 'home.menu.project'|trans }}</h2>
                <p class="text-muted">{{ 'home.text.project1'|trans|raw }}</p>

                <h3 class="section-heading">{{ 'home.title.howItWorks'|trans }}</h3>
                <p class="text-muted">
                    {{ 'home.text.howItWorks1'|trans }}
                </p>

                <h3 class="section-heading"> {{ 'home.title.feature'|trans }}</h3>

                <h4 class="service-heading"> {{ 'home.title.feature1'|trans }}</h4>

                <div class="row">
                    <div class="col-md-offset-2 col-md-8">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/1.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/2.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/3.jpg') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <h4 class="service-heading">{{ 'home.title.feature2'|trans }}</h4>
                <p class="text-muted">{{ 'home.text.feature2'|trans }}</p>

                <div class="row">
                    <div class="col-md-offset-2 col-md-8">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/4.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/5.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/6.jpg') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h4 class="service-heading">{{ 'home.title.feature3'|trans }}</h4>
                <p class="text-muted"{{ 'home.text.feature3'|trans }}</p>

                <div class="row">
                    <div class="col-md-offset-2 col-md-8">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/7.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/8.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/9.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/10.jpg') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <h4 class="service-heading">{{ 'home.title.feature4'|trans }}</h4>
                <p class="text-muted">{{ 'home.text.feature4'|trans }}<br></p>
                <div class="row">
                    <div class="col-md-offset-2 col-md-8">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/11.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/12.jpg') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <h4 class="service-heading">{{ 'home.title.feature5'|trans }}</h4>
                <p class="text-muted">{{ 'home.text.feature5'|trans }}<br></p>
                <div class="row">
                    <div class="col-md-offset-2 col-md-8">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/13.jpg') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/14.jpg') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h4 class="service-heading">{{ 'home.title.feature6'|trans }}</h4>
                <a href="https://apps.apple.com/us/app/mawaqit/id1460522683" target="_blank"><img src="{{ asset('bundles/app/prayer-times/img/appstore.svg') }}"></a>
                <a href="https://play.google.com/store/apps/details?id=com.kanout.mawaqit" target="_blank"><img src="{{ asset('bundles/app/prayer-times/img/playstore.svg') }}"></a>

                <img src="ios" alt="">
                <div class="row">
                    <div class="col-md-offset-4 col-md-4">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/15.png') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/16.png') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/16-1.png') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/16-2.png') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h4 class="service-heading">{{ 'home.title.feature7'|trans }}</h4>

                <div class="row">
                    <div class="col-md-offset-4 col-md-4">
                        <div class="flexslider">
                            <ul class="slides">
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/17.png') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/18.png') }}"/>
                                </li>
                                <li>
                                    <img src="{{ asset('bundles/app/agency/img/software/19.png') }}"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h4 class="service-heading">{{ 'home.title.feature8'|trans }}</h4>
                <p class="text-muted">{{ 'home.text.feature8_1'|trans }}
                </p>
                <ul class="text-muted text-{{ app.request.locale == 'ar' ? 'right' : 'left' }}">
                    {{ 'home.text.feature8_2'|trans|raw }}
                </ul>
            </div>

        </section>

        <!-- Mosquées équipées Grid Section -->
        <section id="mosquees" class="bg-light-gray">
            <div class="container">
                <h2 class="section-heading">{{ 'home.title.equipedMosques'|trans }}</h2>
                <p class="section-subheading text-muted">
                    {{ 'home.text.equipedMosques1'|trans({'totalMosquesCount': totalMosquesCount})|raw }}
                </p>

                <div class="row">
                    <div class="col-md-12">
                        <div class="">
                            {% for item in mosqueNumberByCountry %}
                                <button class="btn btn-success mt-1">
                                    {{ item.country|country|upper }} <span class="badge">{{ item.nb }}</span>
                                </button>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="col-md-12 mt-3">
                        <div id="map" style="height: 600px"></div>
                    </div>
                </div>

                <div class="row mt-2 mb-4">
                    <div class="col-md-offset-2 col-md-8 col-xs-12">
                        <div class="form-group">
                            <input class="form-control input-lg center-placeholder" id="find-mosque" placeholder="{{ 'home.text.findMosque'|trans }}"
                                   data-remote="{{ path('public_mosque_search_ajax') }}">
                        </div>
                        <p class="text-muted">
                            {{ 'home.text.equipedMosques2'|trans|raw }}
                        </p>
                    </div>
                </div>


                <div class="row">
                    {% for mosque in mosquesWithImage %}
                        <div class="col-md-4 col-sm-6 portfolio-item">
                            <a href="#mosque-{{ mosque.slug }}" class="portfolio-link" data-toggle="modal">
                                <div class="portfolio-hover">
                                    <div class="portfolio-hover-content">
                                        <i class="fa fa-plus fa-3x"></i>
                                    </div>
                                </div>
                                <img src="{{ vich_uploader_asset(mosque, 'file1') }}"
                                     class="img-responsive mosque-image"
                                     alt="{{ mosque.name }}"/>
                            </a>
                            <div class="portfolio-caption">
                                <h4>{{ mosque.title }} {{ mosque.country|country }} </h4>
                                <a target="_blank" href="{{ path('mosque', {'slug': mosque.slug}) }}">{{ 'home.text.viewPrayTimes'|trans }}</a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                {% if app.request.get('mosque_nb') != 'all' %}
                    <a href="{{ path("homepage", {'page': app.request.get('page') ? app.request.get('page') + 1 : 2}) }}#mosquees" class="page-scroll btn btn-xl">{{ 'home.button.viewPlus'|trans }}</a>
                {% endif %}
            </div>
        </section>

        <!-- Mosques Modals -->
        {% for mosque in mosquesWithImage %}
            <div class="portfolio-modal modal fade" id="mosque-{{ mosque.slug }}" tabindex="-1" role="dialog"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="close-modal" data-dismiss="modal">
                            <div class="lr">
                                <div class="rl">
                                </div>
                            </div>
                        </div>
                        <div class="container">
                            <div class="modal-body">
                                <h2>{{ mosque.title }} {{ mosque.country|country }}</h2>
                                <p class="item-intro text-muted">{{ mosque.associationName }}</p>
                                <img src="{{ vich_uploader_asset(mosque, 'file1') }}"
                                     class="img-responsive  img-centered" alt="{{ mosque.title }}"/>
                                <img class="img-responsive img-centered"
                                     src="{{ vich_uploader_asset(mosque, 'file2') }}">
                                <img class="img-responsive img-centered"
                                     src="{{ vich_uploader_asset(mosque, 'file3') }}">

                                <ul class="list-inline">
                                    <li>{{ 'home.text.addingDate'|trans }}: {{ mosque.created|date("d/m/Y") }}</li>
                                    <li>
                                        {{ 'home.text.viewPrayTimes'|trans }}: <a target="_blank" href="{{ path('mosque', {'slug': mosque.slug}) }}">{{ url('mosque', {'slug': mosque.slug}) }}</a>
                                    </li>
                                </ul>
                                <button type="button" class="btn btn-primary" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}

        <!-- FAQ Section -->
        <section id="faq" class="bg-light-gray">
            <div class="container">
                <h2 class="section-heading">{{ 'home.title.faq'|trans }}</h2>
                {% for faq in faqs %}
                    <div class="panel panel-default">
                        <div class="panel-heading pointer" data-toggle="collapse" href="#{{ faq.slug }}">
                            <span style="font-weight: 700;">{{ faq.question }}</span>
                        </div>
                        <div id="{{ faq.slug }}" class="panel-collapse collapse">
                            <div class="panel-body text-left">
                                {{ faq.answer|raw }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>
    </div>

{% endblock %}

{% block additional_javascripts %}
    {% javascripts
        '@AppBundle/Resources/public/flexSlider/jquery.flexslider-min.js'
        '@AppBundle/Resources/public/agency/js/index.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
    <script>

        var map = L.map('map').setView([48, 3], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        var mosquesForMap = {{ mosquesForMap|json_encode|raw }};
        $.each(mosquesForMap, function (i, mosque) {

            var popup = '<div>' +
                '<h4> ' + mosque.name + ' </h4>' +
                '<p> ' +
                mosque.address + ' ' + mosque.zipcode + ' ' + mosque.city + ' ' + mosque.countryFullName +
                '</p>' +
                '<p> ' +
                '<a target="_blank" href="' + 'https://mawaqit.net/{{ app.request.locale }}/' + mosque.slug + '">' + 'https://mawaqit.net/{{ app.request.locale }}/' + mosque.slug + '</a>' +
                '</p>' +
                '</div>';

            marker = new L.marker([mosque.lat, mosque.lng])
                .bindPopup(popup)
                .addTo(map);
        });

    </script>

  {% endblock %}